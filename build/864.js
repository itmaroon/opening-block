"use strict";(globalThis.webpackChunkopening_block=globalThis.webpackChunkopening_block||[]).push([[864],{864:(e,t,n)=>{n.r(t),n.d(t,{default:()=>y});var a,i=n(609),l=n(723),o=n(427),r=n(715),s=n(87);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},c.apply(this,arguments)}var p,d=function(e){return i.createElement("svg",c({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},e),a||(a=i.createElement("path",{d:"M464 256a208 208 0 1 0-416 0 208 208 0 1 0 416 0M0 256a256 256 0 1 1 512 0 256 256 0 1 1-512 0m188.3-108.9c7.6-4.2 16.8-4.1 24.3.5l144 88c7.1 4.4 11.5 12.1 11.5 20.5s-4.4 16.1-11.5 20.5l-144 88c-7.4 4.5-16.7 4.7-24.3.5S176 352.9 176 344.2V168c0-8.7 4.7-16.7 12.3-20.9"})))};function g(){return g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},g.apply(this,arguments)}var m,u=function(e){return i.createElement("svg",g({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512"},e),p||(p=i.createElement("path",{d:"M350 177.5c3.8-8.8 2-19-4.6-26l-136-144C204.9 2.7 198.6 0 192 0s-12.9 2.7-17.4 7.5l-136 144c-6.6 7-8.4 17.2-4.6 26S46.5 192 56 192h88v192c0 17.7-14.3 32-32 32H32c-17.7 0-32 14.3-32 32v32c0 17.7 14.3 32 32 32h80c70.7 0 128-57.3 128-128V192h88c9.6 0 18.2-5.7 22-14.5"})))};function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},b.apply(this,arguments)}var _=function(e){return i.createElement("svg",b({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512"},e),m||(m=i.createElement("path",{d:"M350 334.5c3.8 8.8 2 19-4.6 26l-136 144c-4.5 4.8-10.8 7.5-17.4 7.5s-12.9-2.7-17.4-7.5l-136-144c-6.6-7-8.4-17.2-4.6-26S46.5 320 56 320h88V128c0-17.7-14.3-32-32-32H32C14.3 96 0 81.7 0 64V32C0 14.3 14.3 0 32 0h80c70.7 0 128 57.3 128 128v192h88c9.6 0 18.2 5.7 22 14.5"})))};const h=(e,t,n)=>{const a=e.querySelector("#splash"),i=e.querySelector("#splash_logo"),l=e.querySelector(".splashbg"),o=e.querySelector(".splashbg2"),r=e.querySelector(".splashCirclebg"),s=e.querySelector(".fixbg"),c=()=>{s.classList.remove("hide"),l.classList.remove("appear"),l.classList.remove(t),o.classList.remove("appear"),o.classList.remove(t),a.classList.remove("hide"),i.animate([{opacity:1}],{duration:0,fill:"both"}),a.animate([{opacity:1}],{duration:0,fill:"both"}),n(!1)},p=()=>{l.classList.remove("appear"),l.classList.remove(t),s.classList.remove("disappear"),a.animate([{opacity:1}],{duration:0,fill:"both"}),i.animate([{opacity:1}],{duration:0,fill:"both"}),n(!1)},d=()=>{l.classList.add("appear"),l.classList.add(t),s.classList.add("disappear"),s.addEventListener("transitionend",p)},g=()=>{r.classList.remove("appear"),s.classList.remove("disappear"),a.animate([{opacity:1}],{duration:0,fill:"both"}),i.animate([{opacity:1}],{duration:0,fill:"both"}),n(!1)},m=()=>{r.classList.add("appear"),s.classList.add("disappear"),s.addEventListener("transitionend",g)},u=()=>{"virtical_open"===t||"horizen_open"===t?(s.classList.add("hide"),a.animate([{opacity:0}],{duration:0,fill:"both"}),l.classList.add("appear"),l.classList.add(t),o.classList.add("appear"),o.classList.add(t),o.addEventListener("animationend",c)):"virtical_slide"===t||"horizen_slide"===t?a.animate([{opacity:1},{opacity:0}],{delay:800,duration:1e3,fill:"both"}).addEventListener("finish",d):"circle_expand"===t&&a.animate([{opacity:1},{opacity:0}],{delay:800,duration:1e3,fill:"both"}).addEventListener("finish",m)};return i.animate([{opacity:1},{opacity:0}],{delay:800,duration:1e3,fill:"both"}).addEventListener("finish",u),()=>{o.removeEventListener("animationend",c),s.removeEventListener("transitionend",p),a.removeEventListener("finish",d),s.removeEventListener("transitionend",g),a.removeEventListener("finish",m),i.removeEventListener("finish",u)}};function v({attributes:e,onChange:t}){const{ending_type:n,is_anime:a,is_front:s,trigger_anime:c}=e;return(0,i.createElement)(i.Fragment,null,(0,i.createElement)(r.InspectorControls,{group:"settings"},(0,i.createElement)(o.PanelBody,{title:(0,l.__)("Ending Animation","opening-block"),initialOpen:!0,className:"ending_ctrl"},(0,i.createElement)(o.RadioControl,{selected:n,options:[{label:(0,l.__)("Vertical Slide","opening-block"),value:"virtical_slide"},{label:(0,l.__)("Horizen Slide","opening-block"),value:"horizen_slide"},{label:(0,l.__)("Vertical Open","opening-block"),value:"virtical_open"},{label:(0,l.__)("Horizen Open","opening-block"),value:"horizen_open"},{label:(0,l.__)("Circle Expand","opening-block"),value:"circle_expand"}],onChange:e=>{t({ending_type:e})}}))),(0,i.createElement)(r.BlockControls,null,(0,i.createElement)(o.Toolbar,null,(0,i.createElement)(o.Button,{label:a?(0,l.__)("Running","opening-block"):(0,l.__)("Stopped","opening-block"),icon:d,onClick:()=>{t({trigger_anime:!c})},disabled:!s||a}),(0,i.createElement)(o.Button,{label:s?(0,l.__)("To Front","opening-block"):(0,l.__)("To Back","opening-block"),icon:s?_:u,onClick:()=>{t({is_front:!s})},disabled:!!a}))))}var f=n(143);function k({isFront:e,onChange:t}){var[n,a]=(0,s.useState)(null);if((0,s.useEffect)((function(){fetch(`${opening_block.home_url}/wp-json/itmar-rest-api/v1/is-block-registered/?block_name=itmar/design-checkbox`).then((e=>e.json())).then((e=>{a(e.registered),e.registered?t({is_check_enable:!0}):(t({is_check_enable:!1}),(0,f.dispatch)("core/notices").createNotice("error",(0,l.__)("The plugin that displays the Skip opening checkbox is not enabled.","opening-block"),{type:"snackbar"}))})).catch((e=>console.error("エラー:",e)))}),[]),null===n)return(0,i.createElement)("div",{className:"opening_check waiting",style:{display:"block"}},(0,l.__)("Checking block status...","opening-block"));if(n){const t=[["itmar/design-checkbox",{inputName:"anim_is_skip",labelContent:(0,l.__)("The opening will not be displayed next time.","opening-block"),bgColor:"transparent",labelColor:"#ffffff"}]];return(0,i.createElement)("div",{className:"opening_check "+(e?"":"closing"),style:{display:"block"}},(0,i.createElement)(r.InnerBlocks,{template:t,templateLock:"all"}))}return null}function y({attributes:e,setAttributes:t}){const{bg_Color:n,bg_Gradient:a,telop:c,telop_Color:p,duration:d,trigger_anime:g,is_anime:m,is_front:u,ending_type:b}=e,_=c.split(""),f=n||a,y=(0,s.useRef)(null),E=(0,s.useRef)(null),C=(0,r.useBlockProps)({ref:y,style:u?{}:{zIndex:-1,opacity:0}}),L=e=>{t({is_anime:e,is_front:e,trigger_anime:e})};return(0,s.useEffect)((()=>(y.current&&g&&(t({is_anime:!0}),setTimeout((()=>{E.current=h(y.current,b,L)}),1e3*d)),()=>{"function"==typeof E.current&&E.current()})),[g]),(0,i.createElement)(i.Fragment,null,(0,i.createElement)(r.InspectorControls,{group:"settings"},(0,i.createElement)(o.PanelBody,{title:(0,l.__)("Background Settings","opening-block"),initialOpen:!0,className:"back_design_ctrl"},(0,i.createElement)(r.__experimentalPanelColorGradientSettings,{title:(0,l.__)("Background Color Setting","opening-block"),settings:[{colorValue:n,gradientValue:a,label:(0,l.__)("Choice color or gradient","opening-block"),onColorChange:e=>{t({bg_Color:void 0===e?"":e})},onGradientChange:e=>{t({bg_Gradient:e})}}]})),(0,i.createElement)(o.PanelBody,{title:(0,l.__)("Telop Settings","opening-block"),initialOpen:!0,className:"title_design_ctrl"},(0,i.createElement)(o.PanelRow,null,(0,i.createElement)(o.TextControl,{label:(0,l.__)("Telop Settings","opening-block"),labelPosition:"top",value:c,isPressEnterToChange:!0,onChange:e=>t({telop:e})})),(0,i.createElement)(r.__experimentalPanelColorGradientSettings,{title:(0,l.__)("Color Setting","opening-block"),settings:[{colorValue:p,label:(0,l.__)("Telop Color","opening-block"),onColorChange:e=>t({telop_Color:e})}]}),(0,i.createElement)(o.PanelRow,{className:"durationCtrl"},(0,i.createElement)(o.RangeControl,{value:d,label:(0,l.__)("Animation duration","opening-block"),max:15,min:2,onChange:e=>t({duration:e}),separatorType:"none",step:1,withInputField:!1})))),(0,i.createElement)(v,{attributes:e,onChange:e=>{t(e)}}),(0,i.createElement)("div",{...C},(0,i.createElement)("div",{id:"splash",style:{background:f,display:u?"block":"none"}},(0,i.createElement)("div",{id:"splash_logo",style:{top:"65%"}},(0,i.createElement)("div",{className:"wrapper coffee"},(0,i.createElement)("div",{className:"coffee_text",style:{color:p}},_.map(((e,t)=>(0,i.createElement)("span",{className:m?"play":"",style:{animationDelay:.1*t+"s"},key:t},e)))),(0,i.createElement)("span",{className:"coffee_cup"})))),(0,i.createElement)("div",{className:"fixbg"}),(0,i.createElement)("div",{className:"splashbg",style:{background:f}}),(0,i.createElement)("div",{className:"splashbg2",style:{background:f}}),(0,i.createElement)("div",{className:"splashCirclebg",style:{background:f}})),(0,i.createElement)(k,{isFront:u,onChange:e=>t(e)}))}}}]);