"use strict";
(globalThis["webpackChunkopening_block"] = globalThis["webpackChunkopening_block"] || []).push([["src_blocks_tea-time_edit_js"],{

/***/ "./assets/icon/circle-play.svg":
/*!*************************************!*\
  !*** ./assets/icon/circle-play.svg ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ReactComponent: () => (/* binding */ SvgCirclePlay),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
var _path;
function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

var SvgCirclePlay = function SvgCirclePlay(props) {
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg", _extends({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 512 512"
  }, props), _path || (_path = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("path", {
    d: "M464 256a208 208 0 1 0-416 0 208 208 0 1 0 416 0M0 256a256 256 0 1 1 512 0 256 256 0 1 1-512 0m188.3-108.9c7.6-4.2 16.8-4.1 24.3.5l144 88c7.1 4.4 11.5 12.1 11.5 20.5s-4.4 16.1-11.5 20.5l-144 88c-7.4 4.5-16.7 4.7-24.3.5S176 352.9 176 344.2V168c0-8.7 4.7-16.7 12.3-20.9"
  })));
};

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MTIgNTEyIj48IS0tISBGb250IEF3ZXNvbWUgUHJvIDYuNC4wIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlIChDb21tZXJjaWFsIExpY2Vuc2UpIENvcHlyaWdodCAyMDIzIEZvbnRpY29ucywgSW5jLiAtLT48cGF0aCBkPSJNNDY0IDI1NkEyMDggMjA4IDAgMSAwIDQ4IDI1NmEyMDggMjA4IDAgMSAwIDQxNiAwek0wIDI1NmEyNTYgMjU2IDAgMSAxIDUxMiAwQTI1NiAyNTYgMCAxIDEgMCAyNTZ6TTE4OC4zIDE0Ny4xYzcuNi00LjIgMTYuOC00LjEgMjQuMyAuNWwxNDQgODhjNy4xIDQuNCAxMS41IDEyLjEgMTEuNSAyMC41cy00LjQgMTYuMS0xMS41IDIwLjVsLTE0NCA4OGMtNy40IDQuNS0xNi43IDQuNy0yNC4zIC41cy0xMi4zLTEyLjItMTIuMy0yMC45VjE2OGMwLTguNyA0LjctMTYuNyAxMi4zLTIwLjl6Ii8+PC9zdmc+");

/***/ }),

/***/ "./assets/icon/turn-down.svg":
/*!***********************************!*\
  !*** ./assets/icon/turn-down.svg ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ReactComponent: () => (/* binding */ SvgTurnDown),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
var _path;
function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

var SvgTurnDown = function SvgTurnDown(props) {
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg", _extends({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 384 512"
  }, props), _path || (_path = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("path", {
    d: "M350 334.5c3.8 8.8 2 19-4.6 26l-136 144c-4.5 4.8-10.8 7.5-17.4 7.5s-12.9-2.7-17.4-7.5l-136-144c-6.6-7-8.4-17.2-4.6-26S46.5 320 56 320h88V128c0-17.7-14.3-32-32-32H32C14.3 96 0 81.7 0 64V32C0 14.3 14.3 0 32 0h80c70.7 0 128 57.3 128 128v192h88c9.6 0 18.2 5.7 22 14.5"
  })));
};

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzODQgNTEyIj48IS0tISBGb250IEF3ZXNvbWUgUHJvIDYuNC4wIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlIChDb21tZXJjaWFsIExpY2Vuc2UpIENvcHlyaWdodCAyMDIzIEZvbnRpY29ucywgSW5jLiAtLT48cGF0aCBkPSJNMzUwIDMzNC41YzMuOCA4LjggMiAxOS00LjYgMjZsLTEzNiAxNDRjLTQuNSA0LjgtMTAuOCA3LjUtMTcuNCA3LjVzLTEyLjktMi43LTE3LjQtNy41bC0xMzYtMTQ0Yy02LjYtNy04LjQtMTcuMi00LjYtMjZzMTIuNS0xNC41IDIyLTE0LjVoODhsMC0xOTJjMC0xNy43LTE0LjMtMzItMzItMzJIMzJDMTQuMyA5NiAwIDgxLjcgMCA2NFYzMkMwIDE0LjMgMTQuMyAwIDMyIDBsODAgMGM3MC43IDAgMTI4IDU3LjMgMTI4IDEyOGwwIDE5Mmg4OGM5LjYgMCAxOC4yIDUuNyAyMiAxNC41eiIvPjwvc3ZnPg==");

/***/ }),

/***/ "./assets/icon/turn-up.svg":
/*!*********************************!*\
  !*** ./assets/icon/turn-up.svg ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ReactComponent: () => (/* binding */ SvgTurnUp),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
var _path;
function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

var SvgTurnUp = function SvgTurnUp(props) {
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg", _extends({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 384 512"
  }, props), _path || (_path = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("path", {
    d: "M350 177.5c3.8-8.8 2-19-4.6-26l-136-144C204.9 2.7 198.6 0 192 0s-12.9 2.7-17.4 7.5l-136 144c-6.6 7-8.4 17.2-4.6 26S46.5 192 56 192h88v192c0 17.7-14.3 32-32 32H32c-17.7 0-32 14.3-32 32v32c0 17.7 14.3 32 32 32h80c70.7 0 128-57.3 128-128V192h88c9.6 0 18.2-5.7 22-14.5"
  })));
};

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzODQgNTEyIj48IS0tISBGb250IEF3ZXNvbWUgUHJvIDYuNC4wIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlIChDb21tZXJjaWFsIExpY2Vuc2UpIENvcHlyaWdodCAyMDIzIEZvbnRpY29ucywgSW5jLiAtLT48cGF0aCBkPSJNMzUwIDE3Ny41YzMuOC04LjggMi0xOS00LjYtMjZsLTEzNi0xNDRDMjA0LjkgMi43IDE5OC42IDAgMTkyIDBzLTEyLjkgMi43LTE3LjQgNy41bC0xMzYgMTQ0Yy02LjYgNy04LjQgMTcuMi00LjYgMjZzMTIuNSAxNC41IDIyIDE0LjVoODhsMCAxOTJjMCAxNy43LTE0LjMgMzItMzIgMzJIMzJjLTE3LjcgMC0zMiAxNC4zLTMyIDMydjMyYzAgMTcuNyAxNC4zIDMyIDMyIDMybDgwIDBjNzAuNyAwIDEyOC01Ny4zIDEyOC0xMjhsMC0xOTJoODhjOS42IDAgMTguMi01LjcgMjItMTQuNXoiLz48L3N2Zz4=");

/***/ }),

/***/ "./EndingAnime.js":
/*!************************!*\
  !*** ./EndingAnime.js ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ EndingAnime),
/* harmony export */   endingAnimation: () => (/* binding */ endingAnimation)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @wordpress/i18n */ "@wordpress/i18n");
/* harmony import */ var _wordpress_i18n__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _wordpress_components__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @wordpress/components */ "@wordpress/components");
/* harmony import */ var _wordpress_components__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_wordpress_components__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _wordpress_block_editor__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @wordpress/block-editor */ "@wordpress/block-editor");
/* harmony import */ var _wordpress_block_editor__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_wordpress_block_editor__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _assets_icon_circle_play_svg__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./assets/icon/circle-play.svg */ "./assets/icon/circle-play.svg");
/* harmony import */ var _assets_icon_turn_up_svg__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./assets/icon/turn-up.svg */ "./assets/icon/turn-up.svg");
/* harmony import */ var _assets_icon_turn_down_svg__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./assets/icon/turn-down.svg */ "./assets/icon/turn-down.svg");







const endingAnimation = (elmRef, ending_type, onEnding) => {
  //要素を取得
  const splash = elmRef.querySelector('#splash');
  const splash_logo = elmRef.querySelector('#splash_logo');
  const splashbg = elmRef.querySelector('.splashbg');
  const splashbg2 = elmRef.querySelector('.splashbg2');
  const splashCirclebg = elmRef.querySelector('.splashCirclebg');
  const fixbg = elmRef.querySelector('.fixbg');
  //イベントハンドラ
  const open_listener = () => {
    fixbg.classList.remove('hide'); //フェード用背景非表示
    splashbg.classList.remove('appear'); //フェードアウト後appearクラス付与
    splashbg.classList.remove(ending_type); //フェードアウト後appearクラス付与
    splashbg2.classList.remove('appear'); //フェードアウト後appearクラス付与
    splashbg2.classList.remove(ending_type); //フェードアウト後appearクラス付与
    //splash.classList.remove('disappear');
    splash.classList.remove('hide');
    splash_logo.animate([{
      opacity: 1
    }], {
      duration: 0,
      fill: 'both'
    });
    splash.animate([{
      opacity: 1
    }], {
      duration: 0,
      fill: 'both'
    });
    onEnding(false);
  };
  const slide_end_listener = () => {
    splashbg.classList.remove('appear'); //フェードアウト後appearクラス削除
    splashbg.classList.remove(ending_type); //フェードアウト後appearクラス削除
    fixbg.classList.remove('disappear'); //背景を戻す
    splash.animate([{
      opacity: 1
    }], {
      duration: 0,
      fill: 'both'
    });
    splash_logo.animate([{
      opacity: 1
    }], {
      duration: 0,
      fill: 'both'
    });
    onEnding(false);
  };
  const slide_listener = () => {
    splashbg.classList.add('appear'); //フェードアウト後appearクラス付与
    splashbg.classList.add(ending_type); //フェードアウト後appearクラス付与
    fixbg.classList.add('disappear'); //フェードアウト後disappearクラス付与
    fixbg.addEventListener('transitionend', slide_end_listener);
  };
  const circle_end_listener = () => {
    splashCirclebg.classList.remove('appear'); //フェードアウト後appearクラス削除
    fixbg.classList.remove('disappear'); //背景を戻す
    splash.animate([{
      opacity: 1
    }], {
      duration: 0,
      fill: 'both'
    });
    splash_logo.animate([{
      opacity: 1
    }], {
      duration: 0,
      fill: 'both'
    });
    onEnding(false);
  };
  const circle_listener = () => {
    splashCirclebg.classList.add('appear'); //フェードアウト後appearクラス付与
    fixbg.classList.add('disappear'); //フェードアウト後disappearクラス付与
    fixbg.addEventListener('transitionend', circle_end_listener);
  };
  const feedOut_listener = () => {
    //オープン型
    if (ending_type === 'virtical_open' || ending_type === 'horizen_open') {
      fixbg.classList.add('hide'); //フェード用背景非表示
      splash.animate([{
        opacity: 0
      }], {
        duration: 0,
        fill: 'both'
      });
      splashbg.classList.add('appear'); //フェードアウト後appearクラス付与
      splashbg.classList.add(ending_type); //フェードアウト後クラス付与
      splashbg2.classList.add('appear'); //フェードアウト後appearクラス付与
      splashbg2.classList.add(ending_type); //フェードアウト後appearクラス付与
      //最終処理
      splashbg2.addEventListener('animationend', open_listener);
      //スライド型	
    } else if (ending_type === 'virtical_slide' || ending_type === 'horizen_slide') {
      splash.animate([{
        opacity: 1
      }, {
        opacity: 0
      }], {
        delay: 800,
        duration: 1000,
        fill: 'both'
      }).addEventListener("finish", slide_listener);

      //円形拡張型	
    } else if (ending_type === 'circle_expand') {
      splash.animate([{
        opacity: 1
      }, {
        opacity: 0
      }], {
        delay: 800,
        duration: 1000,
        fill: 'both'
      }).addEventListener("finish", circle_listener);
    }
  };

  //ロゴのフェードアウト
  splash_logo.animate([{
    opacity: 1
  }, {
    opacity: 0
  }], {
    delay: 800,
    duration: 1000,
    fill: 'both'
  }).addEventListener("finish", feedOut_listener);

  // Return a cleanup function
  return () => {
    splashbg2.removeEventListener('animationend', open_listener);
    fixbg.removeEventListener('transitionend', slide_end_listener);
    splash.removeEventListener("finish", slide_listener);
    fixbg.removeEventListener('transitionend', circle_end_listener);
    splash.removeEventListener("finish", circle_listener);
    splash_logo.removeEventListener("finish", feedOut_listener);
  };
};
function EndingAnime({
  attributes,
  onChange
}) {
  const {
    ending_type,
    is_anime,
    is_front,
    trigger_anime
  } = attributes;
  return (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_block_editor__WEBPACK_IMPORTED_MODULE_3__.InspectorControls, {
    group: "settings"
  }, (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_components__WEBPACK_IMPORTED_MODULE_2__.PanelBody, {
    title: (0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)("Ending Animation", 'opening-block'),
    initialOpen: true,
    className: "ending_ctrl"
  }, (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_components__WEBPACK_IMPORTED_MODULE_2__.RadioControl, {
    selected: ending_type,
    options: [{
      label: (0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)("Vertical Slide", 'opening-block'),
      value: "virtical_slide"
    }, {
      label: (0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)("Horizen Slide", 'opening-block'),
      value: "horizen_slide"
    }, {
      label: (0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)("Vertical Open", 'opening-block'),
      value: "virtical_open"
    }, {
      label: (0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)("Horizen Open", 'opening-block'),
      value: "horizen_open"
    }, {
      label: (0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)("Circle Expand", 'opening-block'),
      value: "circle_expand"
    }],
    onChange: newValue => {
      onChange({
        ending_type: newValue
      });
    }
  }))), (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_block_editor__WEBPACK_IMPORTED_MODULE_3__.BlockControls, null, (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_components__WEBPACK_IMPORTED_MODULE_2__.Toolbar, null, (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_components__WEBPACK_IMPORTED_MODULE_2__.Button
  //表示するラベルを切り替え
  , {
    label: is_anime ? (0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)("Running", 'opening-block') : (0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)("Stopped", 'opening-block')
    //表示するアイコンを切り替え
    ,
    icon: _assets_icon_circle_play_svg__WEBPACK_IMPORTED_MODULE_4__.ReactComponent

    //setAttributes を使って属性の値を更新（真偽値を反転）
    ,
    onClick: () => {
      onChange({
        trigger_anime: !trigger_anime
      });
    },
    disabled: !is_front || is_anime
  }), (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_components__WEBPACK_IMPORTED_MODULE_2__.Button
  //表示するラベルを切り替え
  , {
    label: is_front ? (0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)("To Front", 'opening-block') : (0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)("To Back", 'opening-block')
    //表示するアイコンを切り替え
    ,
    icon: is_front ? _assets_icon_turn_down_svg__WEBPACK_IMPORTED_MODULE_6__.ReactComponent : _assets_icon_turn_up_svg__WEBPACK_IMPORTED_MODULE_5__.ReactComponent

    //setAttributes を使って属性の値を更新（真偽値を反転）
    ,
    onClick: () => {
      onChange({
        is_front: !is_front
      });
    },
    disabled: is_anime ? true : false
  }))));
}

/***/ }),

/***/ "./SkipAnime.js":
/*!**********************!*\
  !*** ./SkipAnime.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ SkipAnime)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @wordpress/i18n */ "@wordpress/i18n");
/* harmony import */ var _wordpress_i18n__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _wordpress_element__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @wordpress/element */ "@wordpress/element");
/* harmony import */ var _wordpress_element__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_wordpress_element__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _wordpress_data__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @wordpress/data */ "@wordpress/data");
/* harmony import */ var _wordpress_data__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_wordpress_data__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _wordpress_block_editor__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @wordpress/block-editor */ "@wordpress/block-editor");
/* harmony import */ var _wordpress_block_editor__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_wordpress_block_editor__WEBPACK_IMPORTED_MODULE_4__);





function SkipAnime({
  isFront,
  onChange
}) {
  var [isBlockRegistered, setIsBlockRegistered] = (0,_wordpress_element__WEBPACK_IMPORTED_MODULE_2__.useState)(null);
  (0,_wordpress_element__WEBPACK_IMPORTED_MODULE_2__.useEffect)(function () {
    //ブロックが有効かどうかをカスタムエンドポイントで検証
    fetch(`${opening_block.home_url}/wp-json/itmar-rest-api/v1/is-block-registered/?block_name=itmar/design-checkbox`).then(response => response.json()).then(data => {
      setIsBlockRegistered(data.registered);
      if (data.registered) {
        onChange({
          is_check_enable: true
        });
      } else {
        onChange({
          is_check_enable: false
        });
        (0,_wordpress_data__WEBPACK_IMPORTED_MODULE_3__.dispatch)('core/notices').createNotice('error', (0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)("The plugin that displays the Skip opening checkbox is not enabled.", 'opening-block'), {
          type: 'snackbar'
        });
      }
    }).catch(error => console.error('エラー:', error));
  }, []); // 空の依存配列で、コンポーネントのマウント時にのみ実行されるようにする

  // APIからのレスポンスに基づいて条件分岐
  if (isBlockRegistered === null) {
    return (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)("div", {
      className: "opening_check waiting",
      style: {
        display: 'block'
      }
    }, (0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)("Checking block status...", 'opening-block'));
  } else if (isBlockRegistered) {
    //チェックボックス用インナーブロック
    const check_label = (0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)("The opening will not be displayed next time.", 'opening-block');
    const CHECKTEMPLATE = [['itmar/design-checkbox', {
      inputName: 'anim_is_skip',
      labelContent: check_label,
      bgColor: 'transparent',
      labelColor: '#ffffff'
    }]];
    return (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)("div", {
      className: `opening_check ${!isFront ? 'closing' : ''}`,
      style: {
        display: 'block'
      }
    }, (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_block_editor__WEBPACK_IMPORTED_MODULE_4__.InnerBlocks, {
      template: CHECKTEMPLATE,
      templateLock: "all"
    }));
  } else {
    return null;
  }
}

/***/ }),

/***/ "./src/blocks/tea-time/edit.js":
/*!*************************************!*\
  !*** ./src/blocks/tea-time/edit.js ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Edit)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @wordpress/i18n */ "@wordpress/i18n");
/* harmony import */ var _wordpress_i18n__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _wordpress_components__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @wordpress/components */ "@wordpress/components");
/* harmony import */ var _wordpress_components__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_wordpress_components__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _wordpress_block_editor__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @wordpress/block-editor */ "@wordpress/block-editor");
/* harmony import */ var _wordpress_block_editor__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_wordpress_block_editor__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _wordpress_element__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @wordpress/element */ "@wordpress/element");
/* harmony import */ var _wordpress_element__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_wordpress_element__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _editor_scss__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../editor.scss */ "./src/editor.scss");
/* harmony import */ var _EndingAnime__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../EndingAnime */ "./EndingAnime.js");
/* harmony import */ var _SkipAnime__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../SkipAnime */ "./SkipAnime.js");








function Edit({
  attributes,
  setAttributes
}) {
  const {
    bg_Color,
    bg_Gradient,
    telop,
    telop_Color,
    duration,
    trigger_anime,
    is_anime,
    is_front,
    ending_type
  } = attributes;
  //テロップの文字分割
  const characters = telop.split('');
  //単色かグラデーションかの選択
  const bgColor = bg_Color || bg_Gradient;

  // マウント後の最初のuseEffectの内容をスキップするためのuseRef
  const blockRef = (0,_wordpress_element__WEBPACK_IMPORTED_MODULE_4__.useRef)(null);
  //エンディングアニメーション関数参照用のuseRef
  const cleanupRef = (0,_wordpress_element__WEBPACK_IMPORTED_MODULE_4__.useRef)(null);
  const blockProps = (0,_wordpress_block_editor__WEBPACK_IMPORTED_MODULE_3__.useBlockProps)({
    ref: blockRef,
    // ここで参照を blockProps に渡しています
    style: is_front ? {} : {
      zIndex: -1,
      opacity: 0
    } //is_frontフラグによってブロックのzIndexを設定
  });

  //エンディングのハンドル
  const handleEnding = flg => {
    setAttributes({
      is_anime: flg,
      is_front: flg,
      trigger_anime: flg
    }); //アニメボタンの変更、背面へ
  };
  (0,_wordpress_element__WEBPACK_IMPORTED_MODULE_4__.useEffect)(() => {
    if (blockRef.current) {
      //マウント時には実行しない
      if (trigger_anime) {
        // アニメーションを開始
        setAttributes({
          is_anime: true
        });
        //指定時間の後に実行
        setTimeout(() => {
          //エンディングアニメーション関数の実行と参照
          cleanupRef.current = (0,_EndingAnime__WEBPACK_IMPORTED_MODULE_6__.endingAnimation)(blockRef.current, ending_type, handleEnding);
        }, duration * 1000);
      }
    }
    // Cleanup function
    return () => {
      // エンディングアニメーション関数のイベントリスナをクリア
      // Check if cleanup function exists, and if so, call it
      if (typeof cleanupRef.current === 'function') {
        cleanupRef.current();
      }
    };
  }, [trigger_anime]);
  return (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_block_editor__WEBPACK_IMPORTED_MODULE_3__.InspectorControls, {
    group: "settings"
  }, (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_components__WEBPACK_IMPORTED_MODULE_2__.PanelBody, {
    title: (0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)("Background Settings", 'opening-block'),
    initialOpen: true,
    className: "back_design_ctrl"
  }, (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_block_editor__WEBPACK_IMPORTED_MODULE_3__.__experimentalPanelColorGradientSettings, {
    title: (0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)("Background Color Setting", 'opening-block'),
    settings: [{
      colorValue: bg_Color,
      gradientValue: bg_Gradient,
      label: (0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)("Choice color or gradient", 'opening-block'),
      onColorChange: newValue => {
        setAttributes({
          bg_Color: newValue === undefined ? '' : newValue
        });
      },
      onGradientChange: newValue => {
        setAttributes({
          bg_Gradient: newValue
        });
      }
    }]
  })), (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_components__WEBPACK_IMPORTED_MODULE_2__.PanelBody, {
    title: (0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)("Telop Settings", 'opening-block'),
    initialOpen: true,
    className: "title_design_ctrl"
  }, (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_components__WEBPACK_IMPORTED_MODULE_2__.PanelRow, null, (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_components__WEBPACK_IMPORTED_MODULE_2__.TextControl, {
    label: (0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)("Telop Settings", 'opening-block'),
    labelPosition: "top",
    value: telop,
    isPressEnterToChange: true,
    onChange: newValue => setAttributes({
      telop: newValue
    })
  })), (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_block_editor__WEBPACK_IMPORTED_MODULE_3__.__experimentalPanelColorGradientSettings, {
    title: (0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)("Color Setting", 'opening-block'),
    settings: [{
      colorValue: telop_Color,
      label: (0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)("Telop Color", 'opening-block'),
      onColorChange: newValue => setAttributes({
        telop_Color: newValue
      })
    }]
  }), (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_components__WEBPACK_IMPORTED_MODULE_2__.PanelRow, {
    className: "durationCtrl"
  }, (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_components__WEBPACK_IMPORTED_MODULE_2__.RangeControl, {
    value: duration,
    label: (0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)("Animation duration", 'opening-block'),
    max: 15,
    min: 2,
    onChange: val => setAttributes({
      duration: val
    }),
    separatorType: "none",
    step: 1,
    withInputField: false
  })))), (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_EndingAnime__WEBPACK_IMPORTED_MODULE_6__["default"], {
    attributes: attributes,
    onChange: newObj => {
      setAttributes(newObj);
    }
  }), (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)("div", {
    ...blockProps
  }, (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)("div", {
    id: "splash",
    style: {
      background: bgColor,
      display: is_front ? 'block' : 'none'
    }
  }, (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)("div", {
    id: "splash_logo",
    style: {
      top: '65%'
    }
  }, (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)("div", {
    className: "wrapper coffee"
  }, (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)("div", {
    className: "coffee_text",
    style: {
      color: telop_Color
    }
  }, characters.map((char, i) => (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)("span", {
    className: is_anime ? 'play' : '',
    style: {
      animationDelay: `${i * 0.1}s`
    },
    key: i
  }, char))), (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)("span", {
    className: "coffee_cup"
  })))), (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)("div", {
    className: "fixbg"
  }), (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)("div", {
    className: "splashbg",
    style: {
      background: bgColor
    }
  }), (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)("div", {
    className: "splashbg2",
    style: {
      background: bgColor
    }
  }), (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)("div", {
    className: "splashCirclebg",
    style: {
      background: bgColor
    }
  })), (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_SkipAnime__WEBPACK_IMPORTED_MODULE_7__["default"], {
    isFront: is_front,
    onChange: enableObj => setAttributes(enableObj)
  }));
}

/***/ }),

/***/ "./src/editor.scss":
/*!*************************!*\
  !*** ./src/editor.scss ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ })

}]);
//# sourceMappingURL=src_blocks_tea-time_edit_js.js.map